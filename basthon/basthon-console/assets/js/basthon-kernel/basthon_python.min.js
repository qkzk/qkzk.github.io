!function(e,t){"function"==typeof define?define(["./basthon_base"],t):"object"==typeof exports?module.exports=t():e.Basthon=t(BasthonBase)}(this,function(e){"use strict";return new class extends e{constructor(){super(),this.__version__="0.20.0",this._pyodideUrl="https://cdn.jsdelivr.net/pyodide/v0.16.1/full/pyodide.js",this.basthonModulesRoot=this.basthonRoot()+"/modules"}version(){return this.__version__}async _onload(){this.pythonVersion=pyodide.runPython("import platform ; platform.python_version()");const e=console.error;console.error=()=>{},await pyodide.loadPackage(this.basthonRoot()+"/basthon-py/basthon.js"),console.error=e,await pyodide.runPythonAsync("import basthon as __basthon__"),this.__kernel__=pyodide.globals.__basthon__.__kernel__,await pyodide.runPythonAsync("del __basthon__")}async launch(){try{const e=this.basthonRoot()+"/pyodide/pyodide.js";await this.xhr({method:"HEAD",url:e}),this._pyodideUrl=e}catch(e){}window.languagePluginUrl=this._pyodideUrl.substr(0,this._pyodideUrl.lastIndexOf("/"))+"/";try{"undefined"!=typeof requirejs?(requirejs.config({paths:{pyodide:this._pyodideUrl.slice(0,-3)}}),await new Promise(function(e,t){require(["pyodide"],e,t)})):await this.loadScript(this._pyodideUrl)}catch(e){console.log(e),console.error("Can't load pyodide.js")}await languagePluginLoader.then(this._onload.bind(this),function(){console.error("Can't load Python from Pyodide")}),await this.pageLoad}async evalAsync(e,t,o,n=null){if(this.loaded)return void 0===t&&(t=function(e){console.log(e)}),void 0===o&&(o=function(e){console.error(e)}),await this.__kernel__.eval(e,t,o,n)}restart(){if(this.loaded)return this.__kernel__.restart()}putFile(e,t){this.__kernel__.put_file(e,t)}putModule(e,t){return this.__kernel__.put_module(e,t)}userModules(){return this.__kernel__.user_modules()}putRessource(e,t){return"py"===e.split(".").pop()?this.putModule(e,t):this.putFile(e,t)}getFile(e){return this.__kernel__.get_file(e)}getUserModuleFile(e){return this.__kernel__.get_user_module_file(e)}more(e){return this.__kernel__.more(e)}banner(){return this.__kernel__.banner()}complete(e){return this.__kernel__.complete(e)}}});
//# sourceMappingURL=basthon_python.min.js.map