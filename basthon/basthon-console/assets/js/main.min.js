"use strict";function makeEditor(){let a=window.ace.edit("editor");return a.loadScript=async function(){const t=new URL(window.location.href);var n="script",o="from";if(t.searchParams.has(n)){let e=t.searchParams.get(n);try{e=pako.inflate(Base64.toUint8Array(e),{to:"string"})}catch{e=decodeURIComponent(e)}a.setContent(e)}else if(t.searchParams.has(o)){o=t.searchParams.get(o),o=decodeURIComponent(o);let e;try{e=await Basthon.xhr({url:o,method:"GET"})}catch{throw{message:"Le chargement du script "+o+" a échoué.",name:"LoadingException"}}e&&a.setContent(e)}else"undefined"!=typeof localStorage&&"py_src"in localStorage?a.setContent(localStorage.py_src):a.setContent("for i in range(10):\n\tprint(i)");a.scrollToRow(0),a.gotoLine(0)},a.init=async function(){a.session.setMode("ace/mode/python"),a.focus(),a.setOptions({enableLiveAutocompletion:!0,enableBasicAutocompletion:!0,highlightActiveLine:!1,highlightSelectedWord:!0,fontSize:"12pt"});const p=a.completers[1];a.completers=[{getCompletions:function(e,t,n,o,a){let r=[];p.getCompletions(e,t,n,o,function(e,t){r=t});let c=e.getValue().split("\n");c=c.slice(0,n.row+1),c[c.length-1]=c[c.length-1].slice(0,n.column);const l=c.join("\n");let i=Basthon.complete(l);if(i.length){var s,n=i[1];i=i[0];const d=l.slice(n,-o.length);i=i.map(e=>e.slice(d.length)),i=new Set(i);for(s of r)s=s.value,i.has(s)||i.has(s+"(")||i.add(s);a(null,[...i].map(function(e){return{caption:e,value:e}}))}}}],await a.loadScript()},a.download=function(e="script.py"){let t=a.getValue();t=t.replace(/\r\n|\r|\n/g,"\r\n");var n=new Blob([t],{type:"text/plain"});let o=document.createElement("a");o.download=e,o.href=window.URL.createObjectURL(n),o.target="_blank",o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)},a.setContent=function(e){a.setValue(e),a.scrollToRow(0),a.gotoLine(0)},a.open=function(o){return new Promise(function(t,e){const n=new FileReader;n.readAsText(o),n.onload=function(e){a.setContent(e.target.result),t()},n.onerror=e})},a.sharingURL=function(){var e=a.getValue().replace(/\r\n|\r|\n/g,"\r\n");const t=new URL(window.location.href);t.hash="",t.searchParams.delete("from");let n;try{n=Base64.fromUint8Array(pako.deflate(e),!0)}catch{n=encodeURIComponent(e).replace(/\(/g,"%28").replace(/\)/g,"%29")}return t.searchParams.set("script",n),t.href},a.backup=async function(){"undefined"!=typeof localStorage&&(localStorage.py_src=a.getValue())},a}
"use strict";function makeGraphics(){let o=document.getElementById("graphics");return o.init=async function(){Basthon.addEventListener("eval.display",function(e){o.display(e)})},o.clean=function(){o.textContent=""},o.display=function(t){switch(o.clean(),t.display_type){case"p5":function s(e){e.style.width="auto",e.style.height="auto",e.style.maxWidth="100%",e.style.maxHeight="100%"}(e=t.content).style.width="100%",e.style.height="100%",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center";const i=new MutationObserver(function(e,t){for(const n of e)for(const a of n.addedNodes)["canvas","video"].includes(a.tagName.toLowerCase())&&s(a)});i.observe(e,{childList:!0}),e.querySelectorAll("canvas,video").forEach(s),o.appendChild(e);break;case"matplotlib":var e,n=(e=t.content).querySelector("canvas");(e=n?n:e).style.width="",e.style.height="",e.style.maxWidth="100%",e.style.maxHeight="100%",o.appendChild(e);break;case"turtle":window.setTimeout(function(){o.innerHTML=t.content.outerHTML},1);break;case"sympy":o.innerHTML=t.content,"undefined"==typeof MathJax?(console.log("Loading MathJax (Sympy expression needs it)."),function(){let e=document.createElement("script");e.type="text/javascript",e.src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js",document.getElementsByTagName("head")[0].appendChild(e)}()):MathJax.typeset();break;case"html":o.innerHTML=t.content;break;case"multiple":for(var a of["image/svg+xml","image/png","text/html","text/plain"])if(a in t.content){let e=t.content[a];"image/png"===a&&(e='<img src="data:image/png;base64,'+e+'" style="max-width: 100%; max-height: 100%;">'),o.innerHTML=e;break}break;default:console.error("Not supported node type in eval.display result processing.")}},o}
"use strict";function makeGUI(){let o={notifyError:function(e){o._console_error(e);e=e.message||e.reason.message||e;notie.alert({type:"error",text:"Erreur : "+e,stay:!1,time:3,position:"top"});try{Basthon.Goodies.hideLoader()}catch(e){}},init:async function(){const e=o.notifyError;window.addEventListener("error",e),window.addEventListener("unhandledrejection",e),o._console_error=console.error,console.error=function(){e({message:String(arguments[0])})},o.initStateFromStorage("switched",!1),o.initStateFromStorage("darkmode",!0),o.updateSwitchView(),o.updateDarkLight();let t=document.getElementById("run");t.addEventListener("click",o.runScript),t=document.getElementById("open"),t.addEventListener("click",o.openFile),t=document.getElementById("download"),t.addEventListener("click",o.download),t=document.getElementById("share"),t.addEventListener("click",o.share),t=document.getElementById("raz"),t.addEventListener("click",o.restart),t=document.getElementById("btn_shell"),t.addEventListener("click",o.showShell),t=document.getElementById("btn_graph_view"),t.addEventListener("click",o.showGraph),t=document.getElementById("darklight"),t.addEventListener("click",o.switchDarkLight),t=document.getElementById("switch"),t.addEventListener("click",o.switchView),t=document.getElementById("hide-console"),t.addEventListener("click",o.hideConsole),t=document.getElementById("hide-editor"),t.addEventListener("click",o.hideEditor),t=document.getElementById("show-editor-console"),t.addEventListener("click",o.showEditorConsole),await o.basthonInit()},initCaller:async function(e,t,n){Basthon.Goodies.setLoaderText(t);try{return await e()}catch(e){if(!n)throw e;o.notifyError(e)}},basthonInit:async function(){await Basthon.Goodies.showLoader("Chargement de Basthon...",!1);const e=o.initCaller;await e(shell.init,"Chargement de la console...",!0),await e(editor.init,"Chargement de l'éditeur...",!0),await e(graphics.init,"Chargement de la sortie graphique...",!0),await e(o.loadURLAux,"Chargement des fichiers auxiliaires...",!0),await e(o.loadURLModules,"Chargement des modules annexes...",!0),Basthon.Goodies.hideLoader(),window.onbeforeunload=function(){editor.backup().catch(o.notifyError)}},_loadFromURL:async function(e,t){const n=new URL(window.location.href);let o=[];for(var i of n.searchParams.getAll(e)){i=decodeURIComponent(i);const a=i.split("/").pop();let e=Basthon.xhr({method:"GET",url:i,responseType:"arraybuffer"});e=e.then(function(e){return t(a,e)}).catch(function(){throw{message:"Impossible de charger le fichier "+a+".",name:"LoadingException"}}),o.push(e)}await Promise.all(o)},loadURLAux:function(){return o._loadFromURL("aux",Basthon.putFile.bind(Basthon))},loadURLModules:function(){return o._loadFromURL("module",Basthon.putModule.bind(Basthon))},initStateFromStorage:function(e,t=!1){"undefined"!=typeof Storage&&null!==localStorage.getItem(e)?o[e]="true"===localStorage.getItem(e):o[e]=t},saveStateInStorage:function(e){"undefined"!=typeof Storage&&localStorage.setItem(e,o[e])},runScript:function(){editor.backup().catch(o.notifyError);var e=editor.getValue();shell.launch(e,!1),shell.focus()},restart:function(){Basthon.restart(),shell.clear(),graphics.clean()},putFSRessource:function(o){return new Promise(function(t,e){const n=new FileReader;n.readAsArrayBuffer(o),n.onload=async function(e){await Basthon.putRessource(o.name,e.target.result),notie.alert({type:"success",text:o.name+" est maintenant utilisable depuis Python",stay:!1,time:3,position:"top"}),t()},n.onerror=e})},openEditor:async function(e){await editor.open(e),notie.alert({type:"success",text:e.name+" est chargé dans l'éditeur",stay:!1,time:3,position:"top"})},openPythonFile:async function(e){notie.confirm({text:"Que faire de "+e.name+" ?",submitText:"Charger dans l'éditeur",cancelText:"Installer le module",position:"top",submitCallback:()=>{o.openEditor(e)},cancelCallback:()=>{o.putFSRessource(e)}})},openFile:function(){return new Promise(function(n,e){let t=document.createElement("input");t.type="file",t.style.display="none",t.onchange=async function(e){for(var t of e.target.files)"py"===t.name.split(".").pop()?await o.openPythonFile(t):await o.putFSRessource(t);n()},t.onerror=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)})},download:function(){editor.download("script.py")},hideConsole:function(){let e=document.getElementById("hide-console");e.style.display="none",e=document.getElementById("hide-editor"),e.style.display="";let t=document.getElementById("right-div");t.style.display="none",t=document.getElementById("left-div"),t.style.display="",t.style.width="100%"},hideEditor:function(){let e=document.getElementById("hide-editor");e.style.display="none",e=document.getElementById("show-editor-console"),e.style.display="";let t=document.getElementById("left-div");t.style.display="none",t=document.getElementById("right-div"),t.style.display="",t.style.width="100%"},showEditorConsole:function(){let e=document.getElementById("show-editor-console");e.style.display="none",e=document.getElementById("hide-console"),e.style.display="";let t=document.getElementById("left-div");t.style.display="",t.style.width="50%",t=document.getElementById("right-div"),t.style.display="",t.style.width="48%"},updateSwitchView:function(){let e=document.getElementById("left-div"),t=document.getElementById("right-div");o.switched?(e.style.cssFloat="right",t.style.cssFloat="left"):(e.style.cssFloat="left",t.style.cssFloat="right")},switchView:function(){o.switched=!o.switched,o.updateSwitchView(),o.saveStateInStorage("switched")},updateDarkLight:function(){var e=document.getElementsByClassName("darklighted"),t=o.darkmode?"remove":"add";for(const n of e)n.classList[t]("light");e=o.darkmode?"monokai":"xcode";editor.setTheme(`ace/theme/${e}`)},switchDarkLight:function(){o.darkmode=!o.darkmode,o.saveStateInStorage("darkmode"),o.updateDarkLight()},theme:function(){return o.darkmode?"dark":"light"},showShell:function(){shell.style.display="block",graphics.style.display="none"},showGraph:function(){shell.style.display="none",graphics.style.display="flex"},share:function(){const t=editor.sharingURL();notie.confirm({text:document.getElementById("share_message").innerHTML,submitText:"Copier dans le presse-papier",cancelText:"Tester le lien",position:"top",submitCallback:function(){o.copyToClipboard(t)},cancelCallback:function(){let e=document.createElement("a");e.href=t,e.target="_blank",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}})},copyToClipboard:function(e){let t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Copying text command was "+n)}catch(e){console.log("Oops, unable to copy")}document.body.removeChild(t)}};return o}
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.notie=t():e.notie=t()}(this,function(){return a={},s.m=n=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,s=arguments[t];for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e};function a(){return new Promise(function(e){return setTimeout(e,0)})}function o(t){return new Promise(function(e){return setTimeout(e,1e3*t)})}function A(){document.activeElement&&document.activeElement.blur()}function S(){return"notie-"+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function i(){return F.transitionSelector+" "+F.transitionDuration+"s "+F.transitionCurve}function w(e){return 13===e.keyCode}function D(e){return 27===e.keyCode}function O(e,t){e.classList.add(F.classes.container),e.style[t]="-10000px",document.body.appendChild(e),e.style[t]="-"+e.offsetHeight+"px",e.listener&&window.addEventListener("keydown",e.listener),a().then(function(){e.style.transition=i(),e.style[t]=0})}function I(e,t){var n=document.getElementById(e);n&&(n.style[t]="-"+n.offsetHeight+"px",n.listener&&window.removeEventListener("keydown",n.listener),o(F.transitionDuration).then(function(){n.parentNode&&n.parentNode.removeChild(n)}))}function N(e,t){var n=document.createElement("div");n.id=F.ids.overlay,n.classList.add(F.classes.overlay),n.classList.add(F.classes.backgroundOverlay),n.style.opacity=0,e&&F.overlayClickDismiss&&(n.onclick=function(){I(e.id,t),j()}),document.body.appendChild(n),a().then(function(){n.style.transition=i(),n.style.opacity=F.overlayOpacity})}function c(e,t,n){var s=e.text,a=void 0===(i=e.submitText)?"Submit":i,i=void 0===(d=e.cancelText)?"Cancel":d,c=e.submitCallback,o=e.cancelCallback,l=void 0===(d=e.position)?F.positions.input||l.top:d,r=function(e,t){var n,s={};for(n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);return s}(e,["text","submitText","cancelText","submitCallback","cancelCallback","position"]);A(),Y();var d=document.createElement("div"),u=S();d.id=u,(e=document.createElement("div")).classList.add(F.classes.textbox),e.classList.add(F.classes.backgroundInfo),e.innerHTML='<div class="'+F.classes.textboxInner+'">'+s+"</div>";var p=document.createElement("input");p.classList.add(F.classes.inputField),p.setAttribute("autocapitalize",r.autocapitalize||"none"),p.setAttribute("autocomplete",r.autocomplete||"off"),p.setAttribute("autocorrect",r.autocorrect||"off"),p.setAttribute("autofocus",r.autofocus||"true"),p.setAttribute("inputmode",r.inputmode||"verbatim"),p.setAttribute("max",r.max||""),p.setAttribute("maxlength",r.maxlength||""),p.setAttribute("min",r.min||""),p.setAttribute("minlength",r.minlength||""),p.setAttribute("placeholder",r.placeholder||""),p.setAttribute("spellcheck",r.spellcheck||"default"),p.setAttribute("step",r.step||"any"),p.setAttribute("type",r.type||"text"),p.value=r.value||"",r.allowed&&(p.oninput=function(){var e=void 0;if(Array.isArray(r.allowed)){for(var t="",n=r.allowed,s=0;s<n.length;s++)"an"===n[s]?t+="0-9a-zA-Z":"a"===n[s]?t+="a-zA-Z":"n"===n[s]&&(t+="0-9"),"s"===n[s]&&(t+=" ");e=new RegExp("[^"+t+"]","g")}else"object"===f(r.allowed)&&(e=r.allowed);p.value=p.value.replace(e,"")});var m=document.createElement("div");m.classList.add(F.classes.button),m.classList.add(F.classes.elementHalf),m.classList.add(F.classes.backgroundSuccess),m.innerHTML=a,m.onclick=function(){I(u,l),j(),c?c(p.value):t&&t(p.value)};var v=document.createElement("div");v.classList.add(F.classes.button),v.classList.add(F.classes.elementHalf),v.classList.add(F.classes.backgroundError),v.innerHTML=i,v.onclick=function(){I(u,l),j(),o?o(p.value):n&&n(p.value)},d.appendChild(e),d.appendChild(p),d.appendChild(m),d.appendChild(v),d.listener=function(e){w(e)?m.click():D(e)&&v.click()},O(d,l),p.focus(),N(d,l)}var l="top",F={alertTime:3,dateMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],overlayClickDismiss:!0,overlayOpacity:.75,transitionCurve:"ease",transitionDuration:.3,transitionSelector:"all",classes:{container:"notie-container",textbox:"notie-textbox",textboxInner:"notie-textbox-inner",button:"notie-button",element:"notie-element",elementHalf:"notie-element-half",elementThird:"notie-element-third",overlay:"notie-overlay",backgroundSuccess:"notie-background-success",backgroundWarning:"notie-background-warning",backgroundError:"notie-background-error",backgroundInfo:"notie-background-info",backgroundNeutral:"notie-background-neutral",backgroundOverlay:"notie-background-overlay",alert:"notie-alert",inputField:"notie-input-field",selectChoiceRepeated:"notie-select-choice-repeated",dateSelectorInner:"notie-date-selector-inner",dateSelectorUp:"notie-date-selector-up"},ids:{overlay:"notie-overlay"},positions:{alert:l,force:l,confirm:l,input:l,select:"bottom",date:l}},r=t.setOptions=function(e){F=s({},F,e,{classes:s({},F.classes,e.classes),ids:s({},F.ids,e.ids),positions:s({},F.positions,e.positions)})},d={1:F.classes.backgroundSuccess,success:F.classes.backgroundSuccess,2:F.classes.backgroundWarning,warning:F.classes.backgroundWarning,3:F.classes.backgroundError,error:F.classes.backgroundError,4:F.classes.backgroundInfo,info:F.classes.backgroundInfo,5:F.classes.backgroundNeutral,neutral:F.classes.backgroundNeutral},j=function(){var e=document.getElementById(F.ids.overlay);e.style.opacity=0,o(F.transitionDuration).then(function(){e.parentNode&&e.parentNode.removeChild(e)})},Y=t.hideAlerts=function(e){var t=document.getElementsByClassName(F.classes.alert);if(t.length){for(var n=0;n<t.length;n++){var s=t[n];I(s.id,s.position)}e&&o(F.transitionDuration).then(function(){return e()})}},u=t.alert=function(e){var t=e.type,n=void 0===t?4:t,s=e.text,a=e.time,t=void 0===a?F.alertTime:a,a=e.stay,a=void 0!==a&&a,e=e.position,i=void 0===e?F.positions.alert||i.top:e;A(),Y();var e=document.createElement("div"),c=S();e.id=c,e.position=i,e.classList.add(F.classes.textbox),e.classList.add(d[n]),e.classList.add(F.classes.alert),e.innerHTML='<div class="'+F.classes.textboxInner+'">'+s+"</div>",e.onclick=function(){return I(c,i)},e.listener=function(e){(w(e)||D(e))&&Y()},O(e,i),t&&t<1&&(t=1),!a&&t&&o(t).then(function(){return I(c,i)})},p=t.force=function(e,t){var n=e.type,s=void 0===n?5:n,a=e.text,i=e.buttonText,n=void 0===i?"OK":i,c=e.callback,i=e.position,o=void 0===i?F.positions.force||o.top:i;A(),Y();var e=document.createElement("div"),l=S();e.id=l;i=document.createElement("div");i.classList.add(F.classes.textbox),i.classList.add(F.classes.backgroundInfo),i.innerHTML='<div class="'+F.classes.textboxInner+'">'+a+"</div>";var r=document.createElement("div");r.classList.add(F.classes.button),r.classList.add(d[s]),r.innerHTML=n,r.onclick=function(){I(l,o),j(),c?c():t&&t()},e.appendChild(i),e.appendChild(r),e.listener=function(e){w(e)&&r.click()},O(e,o),N()},m=t.confirm=function(e,t,n){var s=e.text,a=e.submitText,i=void 0===a?"Yes":a,c=e.cancelText,a=void 0===c?"Cancel":c,o=e.submitCallback,l=e.cancelCallback,c=e.position,r=void 0===c?F.positions.confirm||r.top:c;A(),Y();var e=document.createElement("div"),d=S();e.id=d;c=document.createElement("div");c.classList.add(F.classes.textbox),c.classList.add(F.classes.backgroundInfo),c.innerHTML='<div class="'+F.classes.textboxInner+'">'+s+"</div>";var u=document.createElement("div");u.classList.add(F.classes.button),u.classList.add(F.classes.elementHalf),u.classList.add(F.classes.backgroundSuccess),u.innerHTML=i,u.onclick=function(){I(d,r),j(),o?o():t&&t()};var p=document.createElement("div");p.classList.add(F.classes.button),p.classList.add(F.classes.elementHalf),p.classList.add(F.classes.backgroundError),p.innerHTML=a,p.onclick=function(){I(d,r),j(),l?l():n&&n()},e.appendChild(c),e.appendChild(u),e.appendChild(p),e.listener=function(e){w(e)?u.click():D(e)&&p.click()},O(e,r),N(e,r)};t.input=c;var v=t.select=function(e,t){var n=e.text,s=e.cancelText,s=void 0===s?"Cancel":s,a=e.cancelCallback,i=e.choices,e=e.position,c=void 0===e?F.positions.select||c.top:e;A(),Y();var o=document.createElement("div"),l=S();o.id=l;e=document.createElement("div");e.classList.add(F.classes.textbox),e.classList.add(F.classes.backgroundInfo),e.innerHTML='<div class="'+F.classes.textboxInner+'">'+n+"</div>",o.appendChild(e),i.forEach(function(e,t){var n=e.type,s=void 0===n?1:n,n=e.text,a=e.handler,e=document.createElement("div");e.classList.add(d[s]),e.classList.add(F.classes.button),e.classList.add(F.classes.selectChoice);t=i[t+1];t&&!t.type&&(t.type=1),t&&t.type===s&&e.classList.add(F.classes.selectChoiceRepeated),e.innerHTML=n,e.onclick=function(){I(l,c),j(),a()},o.appendChild(e)});var r=document.createElement("div");r.classList.add(F.classes.backgroundNeutral),r.classList.add(F.classes.button),r.innerHTML=s,r.onclick=function(){I(l,c),j(),a?a():t&&t()},o.appendChild(r),o.listener=function(e){D(e)&&r.click()},O(o,c),N(o,c)},l=t.date=function(e,t,n){var s=e.value,a=void 0===s?new Date:s,i=e.submitText,c=void 0===i?"OK":i,o=e.cancelText,l=void 0===o?"Cancel":o,r=e.submitCallback,d=e.cancelCallback,u=e.position,p=void 0===u?F.positions.date||p.top:u;A(),Y();function m(e){L.innerHTML=F.dateMonths[e.getMonth()],g.innerHTML=e.getDate(),h.innerHTML=e.getFullYear()}function v(e){var t=new Date(a.getFullYear(),a.getMonth()+e+1,0).getDate();a.getDate()>t&&a.setDate(t),a.setMonth(a.getMonth()+e),m(a)}function f(e){a.setDate(a.getDate()+e),m(a)}function b(e){a.getFullYear()+e<0?a.setFullYear(0):a.setFullYear(a.getFullYear()+e),m(a)}var x="&#9662",L=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),y=function(e){m(a)},k=document.createElement("div"),C=S();k.id=C;var E=document.createElement("div");E.classList.add(F.classes.backgroundInfo);var T=document.createElement("div");T.classList.add(F.classes.dateSelectorInner);s=document.createElement("div");s.classList.add(F.classes.button),s.classList.add(F.classes.elementThird),s.classList.add(F.classes.dateSelectorUp),s.innerHTML=x;i=document.createElement("div");i.classList.add(F.classes.button),i.classList.add(F.classes.elementThird),i.classList.add(F.classes.dateSelectorUp),i.innerHTML=x;o=document.createElement("div");o.classList.add(F.classes.button),o.classList.add(F.classes.elementThird),o.classList.add(F.classes.dateSelectorUp),o.innerHTML=x,L.classList.add(F.classes.element),L.classList.add(F.classes.elementThird),L.innerHTML=F.dateMonths[a.getMonth()],g.classList.add(F.classes.element),g.classList.add(F.classes.elementThird),g.setAttribute("contentEditable",!0),g.addEventListener("input",function(e){var t=new Date(a.getFullYear(),a.getMonth()+1,0).getDate(),n=e.target.textContent.replace(/^0+/,"").replace(/[^\d]/g,"").slice(0,2);Number(n)>t&&(n=t.toString()),e.target.textContent=n,Number(n)<1&&(n="1"),a.setDate(Number(n))}),g.addEventListener("blur",y),g.innerHTML=a.getDate(),h.classList.add(F.classes.element),h.classList.add(F.classes.elementThird),h.setAttribute("contentEditable",!0),h.addEventListener("input",function(e){var t=e.target.textContent.replace(/^0+/,"").replace(/[^\d]/g,"").slice(0,4);e.target.textContent=t,a.setFullYear(Number(t))}),h.addEventListener("blur",y),h.innerHTML=a.getFullYear();e=document.createElement("div");e.classList.add(F.classes.button),e.classList.add(F.classes.elementThird),e.innerHTML=x;u=document.createElement("div");u.classList.add(F.classes.button),u.classList.add(F.classes.elementThird),u.innerHTML=x;y=document.createElement("div");y.classList.add(F.classes.button),y.classList.add(F.classes.elementThird),y.innerHTML=x,s.onclick=function(){return v(1)},i.onclick=function(){return f(1)},o.onclick=function(){return b(1)},e.onclick=function(){return v(-1)},u.onclick=function(){return f(-1)},y.onclick=function(){return b(-1)};var M=document.createElement("div");M.classList.add(F.classes.button),M.classList.add(F.classes.elementHalf),M.classList.add(F.classes.backgroundSuccess),M.innerHTML=c,M.onclick=function(){I(C,p),j(),r?r(a):t&&t(a)};var H=document.createElement("div");H.classList.add(F.classes.button),H.classList.add(F.classes.elementHalf),H.classList.add(F.classes.backgroundError),H.innerHTML=l,H.onclick=function(){I(C,p),j(),d?d(a):n&&n(a)},T.appendChild(s),T.appendChild(i),T.appendChild(o),T.appendChild(L),T.appendChild(g),T.appendChild(h),T.appendChild(e),T.appendChild(u),T.appendChild(y),E.appendChild(T),k.appendChild(E),k.appendChild(M),k.appendChild(H),k.listener=function(e){w(e)?M.click():D(e)&&H.click()},O(k,p),N(k,p)};t.default={alert:u,force:p,confirm:m,input:c,select:v,date:l,setOptions:r,hideAlerts:Y}}],s.c=a,s.i=function(e){return e},s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0);function s(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var n,a});
"use strict";function makeShell(){let i=document.getElementById("shell");return i.ps1=">>> ",i.ps2="... ",i.banner=function(){return Basthon.banner().replace("on WebAssembly VM","")},i.buffer=[],i.reset_buffer=function(){i.buffer=[]},i.init=async function(){i.reset_buffer(),i.term=$("#shell").terminal(function(e){i.buffer.push(e),e=i.buffer.join("\n"),Basthon.more(e)?i.term.set_prompt(i.ps2):(i.term.set_prompt(i.ps1),i.reset_buffer(),i.launch(e,!0))},{greetings:i.banner(),prompt:i.ps1,completionEscape:!1,completion:function(e,t){t(Basthon.complete(e)[0])}}),i.term.resize=()=>{},Basthon.addEventListener("eval.finished",function(e){e.interactive&&"result"in e&&i.echo(e.result["text/plain"]+"\n"),i.wakeup()}),Basthon.addEventListener("eval.output",function(e){switch(e.stream){case"stdout":i.echo(e.content);break;case"stderr":i.error(e.content)}}),Basthon.addEventListener("eval.error",function(e){i.wakeup()})},i.echo=function(e){e=e.toString();const t=i.term;t._prompt_tail=t._prompt_tail||"";let n=t.get_prompt();n.startsWith(t._prompt_tail)?n=n.slice(t._prompt_tail.length):t._prompt_tail="";const r=e.split("\n");r[0]=t._prompt_tail+r[0],t._prompt_tail=r.pop(),t.set_prompt(t._prompt_tail+n),r.length&&t.echo(r.join("\n"))},i.error=function(e){return e=e.toString(),i.term.error(e.replace(/\n+$/,""))},i.pause=function(){i.term.pause()},i.wakeup=function(){i.term.resume()},i.clear=function(){i.term.clear(),i.echo(i.banner()+"\n"),i.reset_buffer()},i.showScript=function(e){e=`# script executed\n${e}`;var t=`${i.ps1}`;t+=e.split("\n").join(`\n${i.ps2}`),t+="\n",i.echo(t);const n=i.querySelector(".terminal-output").lastChild,r=n.firstChild;r.classList.add("exec-script-header");for(const s of r.children)s.style.backgroundColor="inherit";function o(){var e={none:"block","":"none",block:"none"};for(const t of n.childNodes)t!==r&&(t.style.display=e[t.style.display])}r.addEventListener("click",o),o()},i.launch=function(e,t=!0){t||i.showScript(e),i.pause(),Basthon.dispatchEvent("eval.request",{code:e,interactive:t})},i}
"use strict";window.shell=makeShell(),window.editor=makeEditor(),window.graphics=makeGraphics(),window.gui=makeGUI(),window.gui.init();
//# sourceMappingURL=main.min.js.map
